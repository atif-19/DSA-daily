class Solution {
public:
    int fillCups(vector<int>& amount) {
        // Max heap to always pick the two types of drinks
        // with the highest remaining quantity
        priority_queue<int> pq;

        // Push only non-zero amounts into the heap
        for (int i = 0; i < amount.size(); i++) {
            if (amount[i] > 0)
                pq.push(amount[i]);
        }

        int seconds = 0;

        // While we can fill two different cups in one second
        while (pq.size() > 1) {
            seconds++;

            // Take the two largest amounts
            int first = pq.top();
            pq.pop();
            int second = pq.top();
            pq.pop();

            // Decrease both by 1 (fill two cups)
            if (first - 1 > 0)
                pq.push(first - 1);
            if (second - 1 > 0)
                pq.push(second - 1);
        }

        // If one type of cup is left, it must be filled one by one
        if (!pq.empty())
            seconds += pq.top();

        return seconds;
    }
};
