class Solution {
  public:
    
    bool DFS(vector<vector<int>>&adjList,int node,vector<int>&color){
        for(int i=0;i<adjList[node].size();i++){
            int neighbor = adjList[node][i];
            if(color[neighbor]==-1){
                color[neighbor]=!color[node];
                
                if(!DFS(adjList,neighbor,color))
                    return false;
            }
            else if(color[neighbor]==color[node])
                return false;
        }
        
        return true;
    }
    
    bool isBipartite(int V, vector<vector<int>> &edges) {
        // we will apply BFS and color each and every vertex
        // if the vertex is white then we will color it 
        // if the vertex is red and we are trying to make it blue then we return false
        // vice versa too
        
        // first convert the edges to the adjList
        vector<vector<int>>adjList(V);
        for(int i=0;i<edges.size();i++)
        {
            adjList[edges[i][0]].push_back(edges[i][1]);
            adjList[edges[i][1]].push_back(edges[i][0]);
        }
        // stores the color of the vertex
        vector<int>color(V,-1);
        // visited vertex
        
        for(int i=0;i<V;i++){
            if(color[i]==-1){
                color[i]=0;
                if(!DFS(adjList,i,color))
                    return false;
            }
        }
        return true;
    }
};
